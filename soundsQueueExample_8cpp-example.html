<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AriaCoda: soundsQueueExample.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AriaCoda
   &#160;<span id="projectnumber">cdf8a12May11,2021</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('soundsQueueExample_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">soundsQueueExample.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This program demonstrates the sound output queue ArSoundsQueueShows how to operate the sounds queue and add WAV files to play.</p>
<p>You may specify up to 10 file names on the command line. This example only demonstrates using the sounds queue for WAV file playback. For demonstration of using the sounds queue for speech synthesis, see the examples provided with either the ArSpeechSynth_Cepstral or ArSpeechSynth_Festival libraries.</p>
<p>Usage: soundQueue <em>&lt;wav file names&gt;</em></p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">Adept MobileRobots Robotics Interface for Applications (ARIA)</span></div>
<div class="line"><span class="comment">Copyright (C) 2004-2005 ActivMedia Robotics LLC</span></div>
<div class="line"><span class="comment">Copyright (C) 2006-2010 MobileRobots Inc.</span></div>
<div class="line"><span class="comment">Copyright (C) 2011-2015 Adept Technology, Inc.</span></div>
<div class="line"><span class="comment">Copyright (C) 2016-2018 Omron Adept Technologies, Inc.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">     it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">     the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><span class="comment">     (at your option) any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">     but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">     GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">     along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;Aria/Aria.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Aria/ariaTypedefs.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Aria/ariaUtil.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Aria/ArSoundsQueue.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Aria/ArSoundPlayer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> queueNowEmpty() {</div>
<div class="line">  printf(<span class="stringliteral">&quot;The sound queue is now empty.\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> queueNowNonempty() {</div>
<div class="line">  printf(<span class="stringliteral">&quot;The sound queue is now non-empty.\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> no() {</div>
<div class="line">  <span class="comment">// just a false tautology</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {</div>
<div class="line">  Aria::init();</div>
<div class="line">  <span class="comment">//ArLog::init(ArLog::StdErr, ArLog::Verbose);</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create the sound queue.</span></div>
<div class="line">  ArSoundsQueue soundQueue;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set WAV file callbacks </span></div>
<div class="line">  soundQueue.setPlayWavFileCallback(ArSoundPlayer::getPlayWavFileCallback());</div>
<div class="line">  soundQueue.setInterruptWavFileCallback(ArSoundPlayer::getStopPlayingCallback());</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Notifications when the queue goes empty or non-empty.</span></div>
<div class="line">  soundQueue.addQueueEmptyCallback(<span class="keyword">new</span> ArGlobalFunctor(&amp;queueNowEmpty));</div>
<div class="line">  soundQueue.addQueueNonemptyCallback(<span class="keyword">new</span> ArGlobalFunctor(&amp;queueNowNonempty));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Run the sound queue in a new thread</span></div>
<div class="line">  soundQueue.runAsync();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get WAV file names from command line</span></div>
<div class="line">  <span class="keywordflow">if</span>(argc &lt; 2) </div>
<div class="line">  {</div>
<div class="line">    cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; &lt;up to ten WAV sound file names...&gt;\n&quot;</span>;</div>
<div class="line">    Aria::exit(-1);</div>
<div class="line">  }</div>
<div class="line">  std::vector&lt;const char*&gt; filenames;</div>
<div class="line">  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; min(argc, 11); i++) </div>
<div class="line">  {</div>
<div class="line">    filenames.push_back(argv[i]);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// This functor can be used to cancel all sound playback until removed</span></div>
<div class="line">  ArGlobalRetFunctor&lt;bool&gt; dontPlayItem(&amp;no);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">while</span>(Aria::getRunning())</div>
<div class="line">  {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Queue is &quot;</span> &lt;&lt; </div>
<div class="line">      string(soundQueue.isPaused()?<span class="stringliteral">&quot;paused&quot;</span>:(soundQueue.isPlaying()?<span class="stringliteral">&quot;playing&quot;</span>:<span class="stringliteral">&quot;ready&quot;</span>)) </div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;, with &quot;</span> &lt;&lt; soundQueue.getCurrentQueueSize() &lt;&lt; <span class="stringliteral">&quot; pending sounds.&quot;</span> &lt;&lt; endl</div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;Enter a command followed by the enter key:\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tp\trequest pause state (cumulative)\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tr\trequest resume state (cumulative)\n&quot;</span> </div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\ti\tinterrupt current sound\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tc\tclear the queue\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tC\tclear priority &lt; 4 from the queue.\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tn\tAdd &quot;</span> &lt;&lt; filenames[0] &lt;&lt; <span class="stringliteral">&quot; to the queue, but with a condition callback to prevent it playing.\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tv\tAdjust volume -50%\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tV\tAdjust volume +50%\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\to\tAdjust volume -100%\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tO\tAdjust volume +100%\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tl\tAdjust volume -200%\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\tL\tAdjust volume +200%\n&quot;</span></div>
<div class="line">      &lt;&lt; <span class="stringliteral">&quot;\t-\tSet volume adjustment to normal level\n&quot;</span></div>
<div class="line">      ;</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; filenames.size(); i++)</div>
<div class="line">      cout &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;\tadd &quot;</span> &lt;&lt; filenames[i] &lt;&lt; <span class="stringliteral">&quot; to the queue\n&quot;</span>;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\tq\tquit\n\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> c = getchar();</div>
<div class="line">    <span class="keywordflow">if</span>(c == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="keywordflow">switch</span>(c)</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>: soundQueue.pause(); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>: soundQueue.resume(); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>: soundQueue.interrupt(); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>: soundQueue.stop(); ArUtil::sleep(100); Aria::exit(0);</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>: soundQueue.clearQueue(); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>: soundQueue.removePendingItems(4); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>: </div>
<div class="line">      {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Adding \&quot;&quot;</span> &lt;&lt; filenames[0] &lt;&lt; <span class="stringliteral">&quot;\&quot; but with a condition callback that will prevent it from playing...\n&quot;</span>;</div>
<div class="line">        ArSoundsQueue::Item item = soundQueue.createDefaultFileItem(filenames[0]);</div>
<div class="line">        item.playbackConditionCallbacks.push_back(&amp;dontPlayItem);</div>
<div class="line">        soundQueue.addItem(item);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>: ArSoundPlayer::setVolumePercent(-50.0); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span>: ArSoundPlayer::setVolumePercent(50.0); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>: ArSoundPlayer::setVolumePercent(-100.0); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;O&#39;</span>: ArSoundPlayer::setVolumePercent(100.0); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>: ArSoundPlayer::setVolumePercent(-200.0); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>: ArSoundPlayer::setVolumePercent(200.0); <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>: ArSoundPlayer::setVolumePercent(0.0); <span class="keywordflow">break</span>; </div>
<div class="line">      <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">if</span>(filenames.size() &gt; 0 &amp;&amp; c &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;9&#39;</span>)</div>
<div class="line">        {</div>
<div class="line">          <span class="keywordtype">size_t</span> i = c - <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line">          <span class="keywordflow">if</span>(i &lt; filenames.size()) </div>
<div class="line">          {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Adding \&quot;&quot;</span> &lt;&lt; filenames[i] &lt;&lt; <span class="stringliteral">&quot;\&quot; to the queue...\n&quot;</span>; </div>
<div class="line">            soundQueue.play(filenames[i]);</div>
<div class="line">          } </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;ended.\n&quot;</span>;</div>
<div class="line">  Aria::exit(0);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
